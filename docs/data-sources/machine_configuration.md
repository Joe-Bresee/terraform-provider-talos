---
page_title: "talos_machine_configuration Data Source - talos"
subcategory: ""
description: |-
  Generate a machine configuration for a node type
---

# talos_machine_configuration (Data Source)

Generate a machine configuration for a node type

-> **Note:** It is recommended to set the optional `talos_version` attribute. Otherwise when using a new version of the provider with a new major version of the Talos SDK, new machineconfig features will be enabled by default which could cause unexpected behavior.

## Example Usage

```terraform
resource "talos_machine_secrets" "this" {}

data "talos_machine_configuration" "this" {
  cluster_name     = "example-cluster"
  machine_type     = "controlplane"
  cluster_endpoint = "https://cluster.local:6443"
  machine_secrets  = talos_machine_secrets.this.machine_secrets
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_endpoint` (String) The endpoint of the talos kubernetes cluster
- `cluster_name` (String) The name of the talos kubernetes cluster
- `machine_secrets` (Attributes) The secrets for the talos cluster (see [below for nested schema](#nestedatt--machine_secrets))
- `machine_type` (String) The type of machine to generate the configuration for

### Optional

- `config_patches` (List of String) The list of config patches to apply to the generated configuration
- `docs` (Boolean) Whether to generate documentation for the generated configuration
- `examples` (Boolean) Whether to generate examples for the generated configuration
- `kubernetes_version` (String) The version of kubernetes to use
- `talos_version` (String) The version of talos features to use in generated machine configuration

### Read-Only

- `id` (String) The ID of this resource.
- `machine_configuration` (String, Sensitive) The generated machine configuration

<a id="nestedatt--machine_secrets"></a>
### Nested Schema for `machine_secrets`

Required:

- `certs` (Attributes) The certs for the talos kubernetes cluster (see [below for nested schema](#nestedatt--machine_secrets--certs))
- `cluster` (Attributes) The cluster secrets (see [below for nested schema](#nestedatt--machine_secrets--cluster))
- `secrets` (Attributes) The secrets for the talos kubernetes cluster (see [below for nested schema](#nestedatt--machine_secrets--secrets))
- `trustdinfo` (Attributes) The trustd info for the talos kubernetes cluster (see [below for nested schema](#nestedatt--machine_secrets--trustdinfo))

<a id="nestedatt--machine_secrets--certs"></a>
### Nested Schema for `machine_secrets.certs`

Required:

- `etcd` (Attributes) The certificate and key pair (see [below for nested schema](#nestedatt--machine_secrets--certs--etcd))
- `k8s` (Attributes) The certificate and key pair (see [below for nested schema](#nestedatt--machine_secrets--certs--k8s))
- `k8s_aggregator` (Attributes) The certificate and key pair (see [below for nested schema](#nestedatt--machine_secrets--certs--k8s_aggregator))
- `k8s_serviceaccount` (Attributes) (see [below for nested schema](#nestedatt--machine_secrets--certs--k8s_serviceaccount))
- `os` (Attributes) The certificate and key pair (see [below for nested schema](#nestedatt--machine_secrets--certs--os))

<a id="nestedatt--machine_secrets--certs--etcd"></a>
### Nested Schema for `machine_secrets.certs.etcd`

Required:

- `cert` (String) certificate data
- `key` (String, Sensitive) key data


<a id="nestedatt--machine_secrets--certs--k8s"></a>
### Nested Schema for `machine_secrets.certs.k8s`

Required:

- `cert` (String) certificate data
- `key` (String, Sensitive) key data


<a id="nestedatt--machine_secrets--certs--k8s_aggregator"></a>
### Nested Schema for `machine_secrets.certs.k8s_aggregator`

Required:

- `cert` (String) certificate data
- `key` (String, Sensitive) key data


<a id="nestedatt--machine_secrets--certs--k8s_serviceaccount"></a>
### Nested Schema for `machine_secrets.certs.k8s_serviceaccount`

Required:

- `key` (String, Sensitive) The key for the k8s service account


<a id="nestedatt--machine_secrets--certs--os"></a>
### Nested Schema for `machine_secrets.certs.os`

Required:

- `cert` (String) certificate data
- `key` (String, Sensitive) key data



<a id="nestedatt--machine_secrets--cluster"></a>
### Nested Schema for `machine_secrets.cluster`

Required:

- `id` (String) The cluster id
- `secret` (String, Sensitive) The cluster secret


<a id="nestedatt--machine_secrets--secrets"></a>
### Nested Schema for `machine_secrets.secrets`

Required:

- `bootstrap_token` (String, Sensitive) The bootstrap token for the talos kubernetes cluster
- `secretbox_encryption_secret` (String, Sensitive) The secretbox encryption secret for the talos kubernetes cluster

Optional:

- `aescbc_encryption_secret` (String, Sensitive) The aescbc encryption secret for the talos kubernetes cluster


<a id="nestedatt--machine_secrets--trustdinfo"></a>
### Nested Schema for `machine_secrets.trustdinfo`

Required:

- `token` (String, Sensitive) The trustd token for the talos kubernetes cluster
