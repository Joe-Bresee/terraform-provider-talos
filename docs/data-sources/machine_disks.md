---
page_title: "talos_machine_disks Data Source - talos"
subcategory: ""
description: |-
  Generate a machine configuration for a node type
---

# talos_machine_disks (Data Source)

Generate a machine configuration for a node type

-> **Note:** Since Talos natively supports `.machine.install.diskSelector`, the `talos_machine_disks` data source maybe just used to query disk information that could be used elsewhere. It's recommended to use `machine.install.diskSelector` in Talos machine configuration.

## Example Usage

```terraform
resource "talos_machine_secrets" "this" {}

data "talos_machine_disks" "this" {
  client_configuration = talos_machine_secrets.this.client_configuration
  node                 = "10.5.0.2"
  selector             = "disk.size > 6u * GB"
}

# for example, this could be used to pass in a list of disks to rook-ceph
output "nvme_disks" {
  value = data.talos_machine_disks.this.disks.*.name
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `client_configuration` (Attributes) The client configuration data (see [below for nested schema](#nestedatt--client_configuration))
- `node` (String) controlplane node to retrieve the kubeconfig from

### Optional

- `endpoint` (String) endpoint to use for the talosclient. If not set, the node value will be used
- `selector` (String) The CEL expression to filter the disks.
If not set, all disks will be returned.
See [CEL documentation](https://www.talos.dev/latest/talos-guides/configuration/disk-management/#disk-selector).
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `disks` (Attributes List) The disks that match the filters (see [below for nested schema](#nestedatt--disks))
- `id` (String) The generated ID of this resource

<a id="nestedatt--client_configuration"></a>
### Nested Schema for `client_configuration`

Required:

- `ca_certificate` (String) The client CA certificate
- `client_certificate` (String) The client certificate
- `client_key` (String, Sensitive) The client key


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.


<a id="nestedatt--disks"></a>
### Nested Schema for `disks`

Read-Only:

- `bus_path` (String)
- `cdrom` (Boolean)
- `dev_path` (String)
- `io_size` (Number)
- `modalias` (String)
- `model` (String)
- `pretty_size` (String)
- `readonly` (Boolean)
- `rotational` (Boolean)
- `secondary_disks` (List of String)
- `sector_size` (Number)
- `serial` (String)
- `size` (Number)
- `sub_system` (String)
- `symlinks` (List of String)
- `transport` (String)
- `uuid` (String)
- `wwid` (String)
